<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>RemindMe</title>
    <link rel="stylesheet" href="css/vendors/bootstrap.min.css">
  </head>
  <body>
    <div id="container">
      <div id="reminder-container"></div>

      <a href="#/posts/4"><button>Click me (post)</button></a>
      <a href="#/posdts/4"><button>Click me (post)</button></a>
      <a href="#/anything"><button>Click me (anything)</button></a>
      
      <div id="post-container">
        <div id="post-form"></div>
        <div id="posts"></div>
      </div>
    </div>
    <!-- Backbone templates -->
    <script type="text/template" id="reminder-template">
      <label>Alert me every <input type="text" id="reminder-input" /> minutes</label>
      <button id="remind-btn">Remind Me</button>
    </script>

    <script type="text/template" id="post-template">
      <label>Add a post!</label>
      <input type="text" id="post-title-input"/>
      <input type="text" id="post-content-input"/>
      <button id="add-post-btn">Add post</button>
    </script>

    <!-- Libraries -->
    <script src="js/vendors/jquery.js"></script>
    <script src="js/vendors/underscore.js"></script>
    <script src="js/vendors/backbone.js"></script>

    <!-- Backbone scripts -->
    <!-- 
    order:
    models
    collections
    views
    routers
    -->
    <script>
    // Model/Collection
      var Song = Backbone.Model.extend({
        defaults: {
          name: "Unknown",
          artist: "Unknown"
        },
        initialize: function() {
          console.log("Music is the answer");
        }
      });

      var Album = Backbone.Collection.extend({
        model: Song
      });

      var song1 = new Song({ name: "How Bizarre", artist: "OMC" });
      var song2 = new Song({ name: "Sexual Healing", artist: "Marvin Gaye" });
      var song3 = new Song({ name: "Talk It Over In Bed", artist: "OMC" });

      var myAlbum = new Album([ song1, song2, song3 ]);
    </script>

    <script src="js/views/reminder-view.js"></script>
    <script src="js/views/post-view.js"></script>
    
    <script>
      var reminderView = new ReminderView({ 
        el: $('#reminder-container') 
      });
      var postView = new PostView({
        el: $('#post-form')
      });
    </script>

    <script>
    // Router
      var AppRouter = Backbone.Router.extend({
        routes: {
          "posts/:id": "getPost",
          ":route/:action": "loadView",
          "*actions": "defaultRoute" // matches http://example.com/#anything-here
        }
      });
      // initiate the router
      var app_router = new AppRouter;

      app_router.on('route:getPost', function(id) {
        console.log('Get post number ' + id);
      });
      app_router.on('route:loadView', function(route, action) {
        console.log(route + "_" + action);
      });
      app_router.on('route:defaultRoute', function(actions) {
        console.log(actions);
      });

      Backbone.history.start();
    </script>
  </body>
</html>